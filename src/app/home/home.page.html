<ion-app>
  <ion-menu contentId="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Menu</ion-title>
        <ion-buttons slot="end">
          <ion-button (click)="closeMenu()">
            <ion-icon name="close"></ion-icon>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>

    <ion-content>
      <ion-item button (click)="navigateToLogin()" (click)="closeMenu()">Cerrar sesi√≥n</ion-item>
    </ion-content>
  </ion-menu>

  <ion-header class="ion-no-border">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-button (click)="openMenu()">
          <ion-icon name="menu"></ion-icon>
        </ion-button>
      </ion-buttons>
      <ion-segment [(ngModel)]="selectedView">
        <ion-segment-button value="inicio">
          <ion-label>Inicio</ion-label>
        </ion-segment-button>
        <ion-segment-button value="horario">
          <ion-label>Horario</ion-label>
        </ion-segment-button>
      </ion-segment>
    </ion-toolbar>
  </ion-header>

  <ion-content id="main-content">
    <ion-item lines="none">
      <ion-avatar slot="start">
        <img *ngIf="fotoPerfil" [src]="fotoPerfil" alt="Foto de Perfil">
      </ion-avatar>
      <ion-label>
        <p>Hola!</p>
        <h3>{{ user?.name }}</h3>
      </ion-label>
    </ion-item>

    <div [ngSwitch]="selectedView">
      <div *ngSwitchCase="'inicio'">
        <div class="mycontainer">
          <a (click)="goToProfile()">
            <ion-card>
              <ion-card-header>
                <ion-card-title>Perfil</ion-card-title>
                <ion-card-subtitle>Revisa tu Perfil</ion-card-subtitle>
              </ion-card-header>
            </ion-card>
          </a>
          <ion-card>
            <ion-card-header>
              <ion-card-title (click)="scan()">Escanear codigo Qr</ion-card-title>
            </ion-card-header>
          </ion-card>
          <ion-card>
            <ion-card-header>
              <ion-card-title (click)="Asist()">Asistencia</ion-card-title>
            </ion-card-header>
          </ion-card>
        </div>
      </div>

      <div *ngSwitchCase="'horario'">
        <ion-card *ngIf="horario && horario.id">
          <ion-card-header>
            <ion-card-title>Tu Horario</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div *ngIf="horario">
              <div *ngFor="let day of ['Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado']">
                <ion-item *ngIf="horario[day]">
                  <ion-label>
                    <h3>{{ day }}</h3>
                    <ul>
                      <li *ngFor="let modulo of horario[day]">
                        <div *ngFor="let mod of modulo.modulo1">
                          <p>{{ getRamoName(mod.ramo) }}: {{ convertToTimeFormat(mod.hora_inicio) }} - {{ convertToTimeFormat(mod.hora_fin) }}</p>
                        </div>
                        <div *ngFor="let mod of modulo.modulo2">
                          <p>{{ getRamoName(mod.ramo) }}: {{ convertToTimeFormat(mod.hora_inicio) }} - {{ convertToTimeFormat(mod.hora_fin) }}</p>
                        </div>
                        <div *ngFor="let mod of modulo.modulo3">
                          <p>{{ getRamoName(mod.ramo) }}: {{ convertToTimeFormat(mod.hora_inicio) }} - {{ convertToTimeFormat(mod.hora_fin) }}</p>
                        </div>
                      </li>
                    </ul>
                  </ion-label>
                </ion-item>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </div>
    </div>
  </ion-content>
</ion-app>

